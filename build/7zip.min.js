Array.prototype.ElementClass=null;Array.prototype.clear=function(){this.splice(0,this.length)};Array.prototype.reserve=function(h){if(null!=this.ElementClass&&void 0!=this.ElementClass)for(var k=0;k<h;k++)this.push(new this.ElementClass);else throw{name:"Reserve class undefined",message:"ElementClass no defined to reserve an Array"};};var ctypes;
(function(h){var k=function(){function f(d,c){"undefined"===typeof d&&(d=0);"undefined"===typeof c&&(c=0);this.low=d;this.high=c}f.prototype.value=function(){return this._value=this.high<<32|this.low};return f}();h.UInt64=k})(ctypes||(ctypes={}));(function(h){var k=function(){function f(d,c){this.low=d;this.high=c}f.prototype.value=function(){return this._value=this.high<<32|this.low};return f}();h.Int64=k})(ctypes||(ctypes={}));var nid;
(function(h){(function(h){var f=function(){function d(){}d.init=function(){var c=0;d.decoderAsync.onmessage=function(a){0==c?c=a.data:c==d.ENCODE?c=0:c==d.DECODE&&(c=0,d.callback(a.data),d.callback=null)}};d.encodeAsync=function(d,a){};d.decodeAsync=function(c,a){null==d.callback?(d.callback=a,d.decoderAsync.postMessage(d.DECODE),d.decoderAsync.postMessage(c,[c])):console.log("Warning! Another LZMA decoding is running...")};d.decoderAsync=new Worker("LZMAWorker.min.js");d.ENCODE=1;d.DECODE=2;return d}();
h.LZMAHelper=f})(h.utils||(h.utils={}))})(nid||(nid={}));nid.utils.LZMAHelper.init();(function(h){(function(h){var f=function(){function d(){}d.DEFLATE="deflate";d.LZMA="lzma";d.ZLIB="zlib";return d}();h.CompressionAlgorithm=f})(h.utils||(h.utils={}))})(nid||(nid={}));
(function(h){(function(h){var f=ctypes.UInt64,d=ctypes.Int64,c=function(){function a(b,e){"undefined"===typeof e&&(e=0);this.BUFFER_EXT_SIZE=1024;this.offset=0;this.EOF_code_point=this.EOF_byte=-1;"undefined"===typeof b?(b=new ArrayBuffer(this.BUFFER_EXT_SIZE),this.write_position=0):this.write_position=b.byteLength;this.data=new DataView(b);this._position=0;this.offset=e;this.endian=a.BIG_ENDIAN}Object.defineProperty(a.prototype,"buffer",{get:function(){return this.data.buffer},set:function(b){this.data=
new DataView(b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"dataView",{get:function(){return this.data},set:function(b){this.data=b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"position",{get:function(){return this._position+this.offset},set:function(b){this._position<b&&!this.validate(this._position-b)||(this._position=b,this.write_position=b>this.write_position?b:this.write_position)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"length",{get:function(){return this.write_position},set:function(b){this.validateBuffer(b)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this.position},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._position=0};a.prototype.compress=function(b){"undefined"===typeof b&&(b=h.CompressionAlgorithm.LZMA);if(b!=h.CompressionAlgorithm.LZMA)throw{name:"Compression error!",message:b+" not implemented",errorID:0};
};a.prototype.compressAsync=function(b,a){if(b!=h.CompressionAlgorithm.LZMA)throw{name:"Compression error!",message:b+" not implemented",errorID:0};};a.prototype.uncompressAsync=function(b,a){"undefined"===typeof b&&(b=h.CompressionAlgorithm.LZMA);"undefined"===typeof a&&(a=null);if(b==h.CompressionAlgorithm.LZMA)h.LZMAHelper.decodeAsync(this.buffer,function(b){this.buffer=b});else throw{name:"Uncompression error!",message:b+" not implemented",errorID:0};};a.prototype.deflate=function(){};a.prototype.inflate=
function(){};a.prototype.readBoolean=function(){return this.validate(a.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null};a.prototype.readByte=function(){return this.validate(a.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};a.prototype.readBytes=function(b,a,g){"undefined"===typeof g&&(g=0);this.validate(g)&&(a=new DataView(this.data.buffer,this.position,g),this.position+=g,b.dataView=a)};a.prototype.readDouble=function(){if(!this.validate(a.SIZE_OF_FLOAT64))return null;var b=this.data.getFloat64(this.position);
this.position+=a.SIZE_OF_FLOAT64;return b};a.prototype.readFloat=function(){if(!this.validate(a.SIZE_OF_FLOAT32))return null;var b=this.data.getFloat32(this.position);this.position+=a.SIZE_OF_FLOAT32;return b};a.prototype.readInt=function(){if(!this.validate(a.SIZE_OF_INT32))return null;var b=this.data.getInt32(this.position,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32;return b};a.prototype.readInt64=function(){if(!this.validate(a.SIZE_OF_UINT32))return null;var b=this.data.getInt32(this.position,
this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32;var e=this.data.getInt32(this.position,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32;return new d(b,e)};a.prototype.readMultiByte=function(b,a){return this.validate(b)?"":null};a.prototype.readObject=function(){return null};a.prototype.readShort=function(){if(!this.validate(a.SIZE_OF_INT16))return null;var b=this.data.getInt16(this.position,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16;return b};a.prototype.readUnsignedByte=
function(){return this.validate(a.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};a.prototype.readUnsignedInt=function(){if(!this.validate(a.SIZE_OF_UINT32))return null;var b=this.data.getUint32(this.position,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32;return b};a.prototype.readUnsignedInt64=function(){if(!this.validate(a.SIZE_OF_UINT32))return null;var b=this.data.getUint32(this.position,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32;var e=this.data.getUint32(this.position,
this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32;return new f(b,e)};a.prototype.readUnsignedShort=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return b};a.prototype.readUTF=function(){if(!this.validate(a.SIZE_OF_UINT16))return null;var b=this.data.getUint16(this.position,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;return 0<b?this.readUTFBytes(b):""};a.prototype.readUTFBytes=
function(b){if(!this.validate(b))return null;for(var a=new Uint8Array(new ArrayBuffer(b)),g=0;g<b;g++)a[g]=this.data.getUint8(this.position++);return this.decodeUTF8(a)};a.prototype.writeBoolean=function(b){this.validateBuffer(a.SIZE_OF_BOOLEAN);this.data.setUint8(this.position++,b?1:0)};a.prototype.writeByte=function(b){this.validateBuffer(a.SIZE_OF_INT8);this.data.setInt8(this.position++,b)};a.prototype.writeUnsignedByte=function(b){this.validateBuffer(a.SIZE_OF_UINT8);this.data.setUint8(this.position++,
b)};a.prototype.writeBytes=function(a,e,g){"undefined"===typeof g&&(g=0);this.validateBuffer(g);e=new DataView(a.buffer);for(g=0;g<a.length;g++)this.data.setUint8(this.position++,e.getUint8(g))};a.prototype.writeDouble=function(b){this.validateBuffer(a.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,b,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_FLOAT64};a.prototype.writeFloat=function(b){this.validateBuffer(a.SIZE_OF_FLOAT32);this.data.setFloat32(this.position,b,this.endian==a.LITTLE_ENDIAN);
this.position+=a.SIZE_OF_FLOAT32};a.prototype.writeInt=function(b){this.validateBuffer(a.SIZE_OF_INT32);this.data.setInt32(this.position,b,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT32};a.prototype.writeMultiByte=function(a,e){};a.prototype.writeObject=function(a){};a.prototype.writeShort=function(b){this.validateBuffer(a.SIZE_OF_INT16);this.data.setInt16(this.position,b,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_INT16};a.prototype.writeUnsignedShort=function(b){this.validateBuffer(a.SIZE_OF_UINT16);
this.data.setUint16(this.position,b,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16};a.prototype.writeUnsignedInt=function(b){this.validateBuffer(a.SIZE_OF_UINT32);this.data.setUint32(this.position,b,this.endian==a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT32};a.prototype.writeUTF=function(b){b=this.encodeUTF8(b);var e=b.length;this.validateBuffer(a.SIZE_OF_UINT16+e);this.data.setUint16(this.position,e,this.endian===a.LITTLE_ENDIAN);this.position+=a.SIZE_OF_UINT16;this.writeUint8Array(b)};
a.prototype.writeUTFBytes=function(a){this.writeUint8Array(this.encodeUTF8(a))};a.prototype.toString=function(){return"[ByteArray]"};a.prototype.writeUint8Array=function(a){this.validateBuffer(this.position+a.length);for(var e=0;e<a.length;e++)this.data.setUint8(this.position++,a[e])};a.prototype.writeUint16Array=function(b){this.validateBuffer(this.position+b.length);for(var e=0;e<b.length;e++)this.data.setUint16(this.position,b[e],this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_UINT16};
a.prototype.writeUint32Array=function(b){this.validateBuffer(this.position+b.length);for(var e=0;e<b.length;e++)this.data.setUint32(this.position,b[e],this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_UINT32};a.prototype.writeInt8Array=function(a){this.validateBuffer(this.position+a.length);for(var e=0;e<a.length;e++)this.data.setInt8(this.position++,a[e])};a.prototype.writeInt16Array=function(b){this.validateBuffer(this.position+b.length);for(var e=0;e<b.length;e++)this.data.setInt16(this.position,
b[e],this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_INT16};a.prototype.writeInt32Array=function(b){this.validateBuffer(this.position+b.length);for(var e=0;e<b.length;e++)this.data.setInt32(this.position,b[e],this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_INT32};a.prototype.writeFloat32Array=function(b){this.validateBuffer(this.position+b.length);for(var e=0;e<b.length;e++)this.data.setFloat32(this.position,b[e],this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_FLOAT32};a.prototype.writeFloat64Array=
function(b){this.validateBuffer(this.position+b.length);for(var e=0;e<b.length;e++)this.data.setFloat64(this.position,b[e],this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_FLOAT64};a.prototype.readUint8Array=function(b){if(!this.validate(b))return null;for(var e=new Uint8Array(new ArrayBuffer(b)),g=0;g<b;g++)e[g]=this.data.getUint8(this.position),this.position+=a.SIZE_OF_UINT8;return e};a.prototype.readUint16Array=function(b){var e=b*a.SIZE_OF_UINT16;if(!this.validate(e))return null;for(var e=
new Uint16Array(new ArrayBuffer(e)),g=0;g<b;g++)e[g]=this.data.getUint16(this.position,this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_UINT16;return e};a.prototype.readUint32Array=function(b){var e=b*a.SIZE_OF_UINT32;if(!this.validate(e))return null;for(var e=new Uint32Array(new ArrayBuffer(e)),g=0;g<b;g++)e[g]=this.data.getUint32(this.position,this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_UINT32;return e};a.prototype.readInt8Array=function(b){if(!this.validate(b))return null;for(var e=
new Int8Array(new ArrayBuffer(b)),g=0;g<b;g++)e[g]=this.data.getInt8(this.position),this.position+=a.SIZE_OF_INT8;return e};a.prototype.readInt16Array=function(b){var e=b*a.SIZE_OF_INT16;if(!this.validate(e))return null;for(var e=new Int16Array(new ArrayBuffer(e)),g=0;g<b;g++)e[g]=this.data.getInt16(this.position,this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_INT16;return e};a.prototype.readInt32Array=function(b){var e=b*a.SIZE_OF_INT32;if(!this.validate(e))return null;for(var e=new Int32Array(new ArrayBuffer(e)),
g=0;g<b;g++)e[g]=this.data.getInt32(this.position,this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_INT32;return e};a.prototype.readFloat32Array=function(b){var e=b*a.SIZE_OF_FLOAT32;if(!this.validate(e))return null;for(var e=new Float32Array(new ArrayBuffer(e)),g=0;g<b;g++)e[g]=this.data.getFloat32(this.position,this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_FLOAT32;return e};a.prototype.readFloat64Array=function(b){var e=b*a.SIZE_OF_FLOAT64;if(!this.validate(e))return null;for(var e=
new Float64Array(new ArrayBuffer(e)),g=0;g<b;g++)e[g]=this.data.getFloat64(this.position,this.endian===a.LITTLE_ENDIAN),this.position+=a.SIZE_OF_FLOAT64;return e};a.prototype.validate=function(a){a+=this.offset;if(0<this.data.byteLength&&this._position+a<=this.data.byteLength)return!0;throw{name:"Error",message:"Error #2030: End of file was encountered.",errorID:2030};};a.prototype.validateBuffer=function(a){this.write_position=a>this.write_position?a:this.write_position;this.data.byteLength<a&&(a=
new Uint8Array(new ArrayBuffer(a+this.BUFFER_EXT_SIZE)),a.set(new Uint8Array(this.data.buffer)),this.data.buffer=a.buffer)};a.prototype.encodeUTF8=function(a){var e=0;a=this.stringToCodePoints(a);for(var g=[];a.length>e;){var d=a[e++];if(this.inRange(d,55296,57343))this.encoderError(d);else if(this.inRange(d,0,127))g.push(d);else{var c,f;this.inRange(d,128,2047)?(c=1,f=192):this.inRange(d,2048,65535)?(c=2,f=224):this.inRange(d,65536,1114111)&&(c=3,f=240);for(g.push(this.div(d,Math.pow(64,c))+f);0<
c;){var h=this.div(d,Math.pow(64,c-1));g.push(128+h%64);c-=1}}}return new Uint8Array(g)};a.prototype.decodeUTF8=function(a){for(var e=0,d="",c,f=0,h=0,l=0,m=0;a.length>e;){c=a[e++];if(c===this.EOF_byte)c=0!==h?this.decoderError(!1):this.EOF_code_point;else if(0===h)this.inRange(c,0,127)||(this.inRange(c,194,223)?(h=1,m=128,f=c-192):this.inRange(c,224,239)?(h=2,m=2048,f=c-224):this.inRange(c,240,244)?(h=3,m=65536,f=c-240):this.decoderError(!1),f*=Math.pow(64,h),c=null);else if(this.inRange(c,128,191))if(l+=
1,f+=(c-128)*Math.pow(64,h-l),l!==h)c=null;else{var k=f,s=m,m=l=h=f=0;c=this.inRange(k,s,1114111)&&!this.inRange(k,55296,57343)?k:this.decoderError(!1,c)}else m=l=h=f=0,e--,c=this.decoderError(!1,c);null!==c&&c!==this.EOF_code_point&&(65535>=c?0<c&&(d+=String.fromCharCode(c)):(c-=65536,d+=String.fromCharCode(55296+(c>>10&1023)),d+=String.fromCharCode(56320+(c&1023))))}return d};a.prototype.encoderError=function(a){throw{name:"EncodingError",message:"The code point "+a+" could not be encoded.",errorID:0};
};a.prototype.decoderError=function(a,c){if(a)throw{name:"DecodingError",message:"DecodingError.",errorID:0};return c||65533};a.prototype.inRange=function(a,c,d){return c<=a&&a<=d};a.prototype.div=function(a,c){return Math.floor(a/c)};a.prototype.stringToCodePoints=function(a){for(var c=[],d=0,f=a.length;d<a.length;){var h=a.charCodeAt(d);if(this.inRange(h,55296,57343))if(this.inRange(h,56320,57343))c.push(65533);else if(d===f-1)c.push(65533);else{var n=a.charCodeAt(d+1);this.inRange(n,56320,57343)?
(h&=1023,n&=1023,d+=1,c.push(65536+(h<<10)+n)):c.push(65533)}else c.push(h);d+=1}return c};a.BIG_ENDIAN="bigEndian";a.LITTLE_ENDIAN="littleEndian";a.SIZE_OF_BOOLEAN=1;a.SIZE_OF_INT8=1;a.SIZE_OF_INT16=2;a.SIZE_OF_INT32=4;a.SIZE_OF_UINT8=1;a.SIZE_OF_UINT16=2;a.SIZE_OF_UINT32=4;a.SIZE_OF_FLOAT32=4;a.SIZE_OF_FLOAT64=8;return a}();h.ByteArray=c})(h.utils||(h.utils={}))})(nid||(nid={}));var _7zipDefines;
(function(h){h.CRC_INIT_VAL=4294967295;h.STREAM_SEEK_SET=0;h.STREAM_SEEK_CUR=1;h.STREAM_SEEK_END=2;h.k_AES=116459265;h.kNumMax=2147483647;h.kHeader=1;h.kCrcPoly=3988292384;h.kHeaderSize=32;h.kNumNoIndex=4294967295;h.kMajorVersion=0;h.kEncodedHeader=23})(_7zipDefines||(_7zipDefines={}));
(function(h){var k=function(){function f(){}f.prototype.CrcGenerateTable=function(){var d;for(d=0;256>d;d++){var c=d,a;for(a=0;8>a;a++)c=c>>1^_7zipDefines.kCrcPoly&~((c&1)-1);this.g_CrcTable[d]=c}if(1==this.CRC_NUM_TABLES)this.g_CrcUpdate=this.CrcUpdateT1;else{for(;d<256*this.CRC_NUM_TABLES;d++)c=this.g_CrcTable[d-256],this.g_CrcTable[d]=this.g_CrcTable[c&255]^c>>8;this.g_CrcUpdate=this.CrcUpdateT4;this.MY_CPU_X86_OR_AMD64&&!this.CPU_Is_InOrder()&&(this.g_CrcUpdate=this.CrcUpdateT8)}};f.prototype.CrcCalc=
function(d,c){return 0};f.prototype.CrcCalc1=function(d,c){for(var a=_7zipDefines.CRC_INIT_VAL,b=0;b<c;b++)a=this.CRC_UPDATE_BYTE(a,d[b]);return this.CRC_GET_DIGEST(a)};f.prototype.CRC_GET_DIGEST=function(d){return d^_7zipDefines.CRC_INIT_VAL};f.prototype.CRC_UPDATE_BYTE=function(d,c){return this.g_CrcTable[(d^c)&255]^d>>8};f.prototype.CPU_Is_InOrder=function(){return!1};return f}();h._7zipBase=k})(nid||(nid={}));
(function(h){var k=function(){function f(){this.signature=[55,122,188,175,39,28];this.dataOffset=this.archiveBeginStreamPosition=0;this.headerSize=32;this.headersSize=0;this.inByteVector=[]}f.prototype.open=function(d){this.stream=d;this.findAndReadSignature()};f.prototype.findAndReadSignature=function(){if(this.stream.readByte()!=this.signature[0]||this.stream.readByte()!=this.signature[1]||this.stream.readByte()!=this.signature[2]||this.stream.readByte()!=this.signature[3]||this.stream.readByte()!=
this.signature[4]||this.stream.readByte()!=this.signature[5])return console.log("Error! Invalid file"),!1;console.log("7zip file");this.versionMajor=this.stream.readByte();this.versionMinor=this.stream.readByte();this.startHeaderCRC=this.stream.readUnsignedInt();this.nextHeaderOffset=this.stream.readUnsignedInt64().value();this.nextHeaderSize=this.stream.readUnsignedInt64().value();this.nextHeaderCRC=this.stream.readUnsignedInt();this.stream.position=this.nextHeaderOffset};f.prototype.readDatabase=
function(d){this.db=d;this.db.clear();this.db.archiveInfo.startPosition=this.archiveBeginStreamPosition;this.db.archiveInfo.versionMajor=this.versionMajor;this.db.archiveInfo.versionMinor=this.versionMinor;this.dataOffset=this.archiveBeginStreamPosition;if(this.versionMajor!=_7zipDefines.kMajorVersion)return console.log("UnsupportedVersion"),!1;this.dataOffset=this.archiveBeginStreamPosition+_7zipDefines.kHeaderSize;this.db.archiveInfo.startPositionAfterHeader=this.dataOffset;if(0==this.nextHeaderSize)return!0;
if(4294967295<this.nextHeaderSize||0>this.nextHeaderOffset)return!1;this.stream.position=this.nextHeaderOffset;var c=new h.ByteBuffer;c.setCapacity(this.nextHeaderSize);this.stream.readBytes(c,this.nextHeaderSize);this.headersSize+=_7zipDefines.kHeaderSize+this.nextHeaderSize;this.db.phySize=_7zipDefines.kHeaderSize+this.nextHeaderOffset+this.nextHeaderSize;var a=new StreamSwitch;a.set2(this,c);var c=[],b=this.inByteBack.readID();if(b!=kHeader){b!=kEncodedHeader&&console.log("Incorrect");this.readAndDecodePackedStreams(c)&&
console.log("readAndDecodePackedStreams:OK");if(0==c.length)return!0;1<c.length&&console.log("Incorrect");a.remove();a.set3(this,c);this.inByteBack.readID()!=kHeader&&console.log("Incorrect")}d.headersSize=this.headersSize;return this.readHeader()};f.prototype.readAndDecodePackedStreams=function(d){var c=[],a=[];this.readStreamsInfo(null,c,[],[],a,[],[],[],[]);for(var b=0,e=new Decoder,g=this.dataOffset,f=0;f<a.length;f++){var q=a[f],n=new h.ByteBuffer;d.push(n);var l=q.getUnpackSize();n.setCapacity(l);
e.decode(this.stream,g,c[b],q,n);for(n=0;n<q.packStreams.length;n++)l=c[b++],g+=l,this.headersSize+=l}return!0};f.prototype.readAndDecodePackedStreams2=function(d,c){this.waitAttribute(kFolder);var a=this.inByteBack.readNum();(new StreamSwitch).set3(this,d);c.clear();for(var b=0;b<a;b++){var e=new Folder;c.push(e);this.getNextFolderItem(e)}this.waitAttribute(kCodersUnpackSize);for(b=0;b<a;b++)for(var e=c[b],g=e.getNumOutStreams(),f=0;f<g;f++)e.unpackSizes.push(this.inByteBack.readNumber());for(;;){b=
this.inByteBack.readID();if(b==kEnd)break;if(b==kCRC)for(g=[],f=[],this.readHashDigests(a,g,f),b=0;b<a;b++)e=c[b],e.unpackCRCDefined=g[b],e.unpackCRC=f[b];else this.inByteBack.skipData2()}};f.prototype.readHeader=function(){var d=this.inByteBack.readID();d==kArchiveProperties&&(this.readArchiveProperties(),d=this.inByteBack.readID());var c=[];d==kAdditionalStreamsInfo&&(this.readAndDecodePackedStreams(c)&&console.log("kAdditionalStreamsInfo:OK"),this.db.archiveInfo.dataStartPosition2+=this.db.archiveInfo.startPositionAfterHeader,
d=this.inByteBack.readID());var a=[],b=[],e=[];if(d==kMainStreamsInfo)this.readStreamsInfo(c,this.db.packSizes,this.db.packCRCsDefined,this.db.packCRCs,this.db.folders,this.db.numUnpackStreamsVector,a,b,e),this.db.archiveInfo.dataStartPosition+=this.db.archiveInfo.startPositionAfterHeader,d=this.inByteBack.readID();else for(var g=0;g<this.db.folders.length;g++){this.db.numUnpackStreamsVector.push(1);var f=this.db.folders[g];a.push(f.getUnpackSize());b.push(f.unpackCRCDefined);e.push(f.unpackCRC)}this.db.files.clear();
if(d==kEnd)return!0;d!=kFilesInfo&&console.log("Incorrect");f=this.inByteBack.readNum();for(g=0;g<f;g++)this.db.files.push(new FileItem);this.db.archiveInfo.fileInfoPopIDs.push(kSize);0!=this.db.packSizes.length&&this.db.archiveInfo.fileInfoPopIDs.push(kPackInfo);0<f&&0!=e.length&&this.db.archiveInfo.fileInfoPopIDs.push(kCRC);var h=[];this.boolVector_Fill_False(h,f);for(var n=[],l=[],m=0;;){d=this.inByteBack.readID();if(d==kEnd)break;var k=this.inByteBack.readNumber(),s=this.inByteBack.position,t=
!0,u=!0;if(1073741824<d)u=!1;else switch(d){case kName:g=new StreamSwitch;g.set3(this,c);for(g=0;g<this.db.files.length;g++)this.db.files[g].name=this.inByteBack.readString();break;case kWinAttributes:var v=[];this.readBoolVector2(this.db.files.length,v);g=new StreamSwitch;g.set3(this,c);for(g=0;g<f;g++){var p=this.db.files[g];p.attribDefined=v[g];p.attribDefined&&(p.attrib=this.inByteBack.readUInt32())}break;case kEmptyStream:this.readBoolVector(f,h);for(g=0;g<h.length;g++)h[g]&&m++;this.boolVector_Fill_False(n,
m);this.boolVector_Fill_False(l,m);break;case kEmptyFile:this.readBoolVector(m,n);break;case kAnti:this.readBoolVector(m,l);break;case kStartPos:this.readUInt64DefVector(c,this.db.startPos,f);break;case kCTime:this.readUInt64DefVector(c,this.db.cTime,f);break;case kATime:this.readUInt64DefVector(c,this.db.aTime,f);break;case kMTime:this.readUInt64DefVector(c,this.db.mTime,f);break;case kDummy:for(g=0;g<k;g++)0!=this.inByteBack.readByte()&&console.log("Incorrect");t=!1;break;default:t=u=!1}u?t&&this.db.archiveInfo.fileInfoPopIDs.push(d):
this.inByteBack.skipData(k);(0<this.db.archiveInfo.versionMajor||2<this.db.archiveInfo.versionMinor)&&this.inByteBack.position-s!=k&&console.log("Incorrect")}for(g=k=c=d=0;g<m;g++)l[g]&&k++;for(g=0;g<f;g++)p=this.db.files[g],p.hasStream=!h[g],p.hasStream?(m=p.isDir=!1,p.size=a[c],p.CRC=e[c],p.CRCDefined=b[c],c++):(p.isDir=!n[d],m=l[d],d++,p.size=0,p.CRCDefined=!1),0!=k&&this.db.isAnti.push(m);return!0};f.prototype.readArchiveProperties=function(){for(;this.inByteBack.readID()!=kEnd;)this.inByteBack.skipData2()};
f.prototype.readPackInfo=function(d,c,a){this.dataOffset=this.inByteBack.readNumber();this.db.archiveInfo.dataStartPosition=this.dataOffset;var b=this.inByteBack.readNum();this.waitAttribute(kSize);d.clear();for(var e=0;e<b;e++)d.push(this.inByteBack.readNumber());for(;;){d=this.inByteBack.readID();if(d==kEnd)break;d==kCRC?this.readHashDigests(b,c,a):this.inByteBack.skipData2()}if(0==c.length)for(this.boolVector_Fill_False(c,b),a.clear(),e=0;e<b;e++)a.push(0)};f.prototype.readHashDigests=function(d,
c,a){this.readBoolVector2(d,c);a.clear();for(var b=0;b<d;b++){var e=0;c[b]&&(e=this.inByteBack.readUInt32());a.push(e)}};f.prototype.waitAttribute=function(d){for(;;){var c=this.inByteBack.readID();if(c==d)break;c==kEnd&&console.log("Incorrect");this.inByteBack.skipData2()}};f.prototype.readUnpackInfo=function(d,c){this.waitAttribute(kFolder);var a=this.inByteBack.readNum();(void 0).set3(this,d);c.clear();for(var b=0;b<a;b++){var e=new Folder;c.push(e);this.getNextFolderItem(e)}this.waitAttribute(kCodersUnpackSize);
for(b=0;b<a;b++)for(var e=c[b],g=e.getNumOutStreams(),f=0;f<g;f++)e.unpackSizes.push(this.inByteBack.readNumber());for(;;){b=this.inByteBack.readID();if(b==kEnd)break;if(b==kCRC)for(this.readHashDigests(a,void 0,void 0),b=0;b<a;b++)e=c[b],e.unpackCRCDefined=(void 0)[b],e.unpackCRC=(void 0)[b];else this.inByteBack.skipData2()}};f.prototype.getNextFolderItem=function(d){var c=this.inByteBack.readNum();d.coders.clear();var a=0,b=0,e;for(e=0;e<c;e++){var g=new CoderInfo;d.coders.push(g);var f=this.inByteBack.readByte(),
k=f&15,n=new h.ByteBuffer;n.setCapacity(15);this.inByteBack.readBytes(n,k);8<k&&console.log("Unsupported");for(var l=0,m=0;m<k;m++)l|=n[k-1-m]<<8*m;g.methodID=l;0!=(f&16)?(g.numInStreams=this.inByteBack.readNum(),g.numOutStreams=this.inByteBack.readNum()):(g.numInStreams=1,g.numOutStreams=1);0!=(f&32)&&(k=this.inByteBack.readNum(),g.props.setCapacity(k),this.inByteBack.readBytes(g.props,k));0!=(f&128)&&console.log("Unsupported");a+=g.numInStreams;b+=g.numOutStreams}c=b-1;d.bindPairs.clear();for(e=
0;e<c;e++)b=new BindPair,b.inIndex=this.inByteBack.readNum(),b.outIndex=this.inByteBack.readNum(),d.bindPairs.push(b);a<c&&console.log("Unsupported");c=a-c;if(1==c){for(e=0;e<a;e++)if(0>d.findBindPairForInStream(e)){d.packStreams.push(e);break}1!=d.packStreams.length&&console.log("Unsupported")}else for(e=0;e<c;e++)d.packStreams.push(this.inByteBack.readNum())};f.prototype.readSubStreamsInfo=function(d,c,a,b,e){c.clear();for(var g;;)if(g=this.inByteBack.readID(),g==kNumUnpackStream)for(var f=0;f<
d.length;f++)c.push(this.inByteBack.readNum());else{if(g==kCRC||g==kSize||g==kEnd)break;this.inByteBack.skipData2()}if(0==c.length)for(f=0;f<d.length;f++)c.push(1);for(f=0;f<c.length;f++){var h=c[f];if(0!=h){for(var k=0,l=1;l<h;l++)if(g==kSize){var m=this.inByteBack.readNumber();a.push(m);k+=m}a.push(d[f].getUnpacklength-k)}}g==kSize&&(g=this.inByteBack.readID());for(f=k=a=0;f<d.length;f++)h=c[f],1==h&&d[f].UnpackCRCDefined||(a+=h),k+=h;for(;;){if(g==kCRC){g=[];m=[];this.readHashDigests(a,g,m);for(var r=
0,f=0;f<d.length;f++)if(h=c[f],l=d[f],1==h&&l.unpackCRCDefined)b.push(!0),e.push(l.unpackCRC);else for(l=0;l<h;l++,r++)b.push(g[r]),e.push(m[r])}else if(g==kEnd){if(0==b.length)for(this.boolVector_Fill_False(b,k),e.clear(),f=0;f<k;f++)e.push(0);break}else this.inByteBack.skipData2();g=this.inByteBack.readID()}};f.prototype.readStreamsInfo=function(d,c,a,b,e,f,h,k,n){for(;;){var l=this.inByteBack.readID();1073741824<l&&console.log("Incorrect");switch(l){case kEnd:return;case kPackInfo:this.readPackInfo(c,
a,b);break;case kUnpackInfo:this.readUnpackInfo(d,e);break;case kSubStreamsInfo:this.readSubStreamsInfo(e,f,h,k,n);break;default:console.log("Incorrect")}}};f.prototype.readBoolVector=function(d,c){c.splice(0,c.length);c.reserve(d);for(var a=0,b=0,e=0;e<d;e++)0==b&&(a=this.inByteBack.readByte(),b=128),c.push(0!=(a&b)),b>>=1;return c};f.prototype.readBoolVector2=function(d,c){if(0==this.inByteBack.readByte())this.readBoolVector(d,c);else{c.splice(0,c.length);c.reserve(d);for(var a=0;a<d;a++)c.push(!0);
return c}};f.prototype.readUInt64DefVector=function(d,c,a){this.readBoolVector2(a,c.defined);(new StreamSwitch).set3(this,d);c.values.reserve(a);for(d=0;d<a;d++){var b=0;c.defined[d]&&(b=this.inByteBack.readUInt64().value());c.values.push(b)}};f.prototype.boolVector_Fill_False=function(d,c){for(var a=0;a<c;a++)d[a]=!1};f.prototype.readDatabase2=function(){};f.prototype.deleteByteStream=function(){this.inByteVector.pop();0<this.inByteVector.length&&(this.inByteBack=this.inByteVector[this.inByteVector.length-
1])};f.prototype.addByteStream=function(d,c){this.inByteBack=new InByte2;this.inByteVector.push(this.inByteBack);this.inByteBack.init(d,c)};return f}();h.InArchive=k})(nid||(nid={}));var __extends=this.__extends||function(h,k){function f(){this.constructor=h}for(var d in k)k.hasOwnProperty(d)&&(h[d]=k[d]);f.prototype=k.prototype;h.prototype=new f};
(function(h){var k=function(f){function d(c,a){f.call(this,c,a)}__extends(d,f);d.prototype.setCapacity=function(c){f.prototype.buffer=new ArrayBuffer(c)};d.prototype.readByte=function(){return f.prototype.readByte.call(this)};d.prototype.readBytes=function(c,a){f.prototype.readBytes.call(this,c,0,a)};d.prototype.skipData=function(c){f.prototype.position+=c};d.prototype.skipData2=function(){this.skipData(this.readNumber())};d.prototype.readID=function(){return this.readNumber()};d.prototype.readNumber=
function(){for(var c=f.prototype.readByte.call(this),a=128,b=0,d=0;8>d;d++){if(0==(c&a)){b+=(c&a-1)<<8*d;break}b|=f.prototype.readByte.call(this)<<8*d;a>>=1}return b};d.prototype.readNum=function(){var c=this.readNumber();c>_7zipDefines.kNumMax&&console.log("Unsupported Num:"+c);return c};d.prototype.readUInt32=function(){return f.prototype.readUnsignedInt.call(this)};d.prototype.readUInt64=function(){return f.prototype.readUnsignedInt64.call(this)};d.prototype.readString=function(){return f.prototype.readUTFBytes.call(this,
2*(f.prototype.bytesAvailable/2))};return d}(h.utils.ByteArray);h.ByteBuffer=k})(nid||(nid={}));(function(h){var k=h.utils.ByteArray,f=function(d){function c(a){a&&this.load(a);this.db=new ArchiveDatabaseEx}__extends(c,d);c.prototype.load=function(a){this.data=new k(a);this.archive=new h.InArchive;this.archive.open(this.data);this.archive.readDatabase(this.db)};return c}(h._7zipBase);h._7zip=f})(nid||(nid={}));
