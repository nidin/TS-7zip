var ctypes;(function(b){var e=function(){function b(a,d){"undefined"===typeof a&&(a=0);"undefined"===typeof d&&(d=0);this.low=a;this.high=d}b.prototype.value=function(){return this._value=this.high<<32|this.low};return b}();b.UInt64=e})(ctypes||(ctypes={}));(function(b){var e=function(){function b(a,d){this.low=a;this.high=d}b.prototype.value=function(){return this._value=this.high<<32|this.low};return b}();b.Int64=e})(ctypes||(ctypes={}));var nid;
(function(b){(function(b){var f=function(){function a(){}a.init=function(){var d=0;a.decoderAsync.onmessage=function(c){0==d?d=c.data:d==a.ENCODE?d=0:d==a.DECODE&&(d=0,a.callback(c.data),a.callback=null)}};a.encodeAsync=function(a,c){};a.decodeAsync=function(d,c){null==a.callback?(a.callback=c,a.decoderAsync.postMessage(a.DECODE),a.decoderAsync.postMessage(d,[d])):console.log("Warning! Another LZMA decoding is running...")};a.decoderAsync=new Worker("LZMAWorker.min.js");a.ENCODE=1;a.DECODE=2;return a}();
b.LZMAHelper=f})(b.utils||(b.utils={}))})(nid||(nid={}));nid.utils.LZMAHelper.init();(function(b){(function(b){var f=function(){function a(){}a.DEFLATE="deflate";a.LZMA="lzma";a.ZLIB="zlib";return a}();b.CompressionAlgorithm=f})(b.utils||(b.utils={}))})(nid||(nid={}));
(function(b){(function(e){var f=ctypes.UInt64,a=ctypes.Int64,d=function(){function c(h,a){"undefined"===typeof a&&(a=0);this.BUFFER_EXT_SIZE=1024;this.offset=0;this.EOF_code_point=this.EOF_byte=-1;"undefined"===typeof h?(h=new ArrayBuffer(this.BUFFER_EXT_SIZE),this.write_position=0):this.write_position=h.byteLength;this.data=new DataView(h);this._position=0;this.offset=a;this.endian=c.BIG_ENDIAN}Object.defineProperty(c.prototype,"buffer",{get:function(){return this.data.buffer},set:function(c){this.data=
new DataView(c)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"dataView",{get:function(){return this.data},set:function(c){this.data=c},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"position",{get:function(){return this._position+this.offset},set:function(c){this._position<c&&!this.validate(this._position-c)||(this._position=c,this.write_position=c>this.write_position?c:this.write_position)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"length",{get:function(){return this.write_position},set:function(c){this.validateBuffer(c)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this.position},enumerable:!0,configurable:!0});c.prototype.clear=function(){this._position=0};c.prototype.compress=function(c){"undefined"===typeof c&&(c=b.utils.CompressionAlgorithm.LZMA);if(c!=b.utils.CompressionAlgorithm.LZMA)throw{name:"Compression error!",message:c+" not implemented",
errorID:0};};c.prototype.compressAsync=function(c,a){if(c!=b.utils.CompressionAlgorithm.LZMA)throw{name:"Compression error!",message:c+" not implemented",errorID:0};};c.prototype.uncompressAsync=function(c,a){"undefined"===typeof c&&(c=b.utils.CompressionAlgorithm.LZMA);"undefined"===typeof a&&(a=null);if(c==b.utils.CompressionAlgorithm.LZMA)b.utils.LZMAHelper.decodeAsync(this.buffer,function(c){this.buffer=c});else throw{name:"Uncompression error!",message:c+" not implemented",errorID:0};};c.prototype.deflate=
function(){};c.prototype.inflate=function(){};c.prototype.readBoolean=function(){return this.validate(c.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null};c.prototype.readByte=function(){return this.validate(c.SIZE_OF_INT8)?this.data.getInt8(this.position++):null};c.prototype.readBytes=function(c,a,d){"undefined"===typeof d&&(d=0);this.validate(d)&&(a=new DataView(this.data.buffer,this.position,d),this.position+=d,c.dataView=a)};c.prototype.readDouble=function(){if(!this.validate(c.SIZE_OF_FLOAT64))return null;
var a=this.data.getFloat64(this.position);this.position+=c.SIZE_OF_FLOAT64;return a};c.prototype.readFloat=function(){if(!this.validate(c.SIZE_OF_FLOAT32))return null;var a=this.data.getFloat32(this.position);this.position+=c.SIZE_OF_FLOAT32;return a};c.prototype.readInt=function(){if(!this.validate(c.SIZE_OF_INT32))return null;var a=this.data.getInt32(this.position,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_INT32;return a};c.prototype.readInt64=function(){if(!this.validate(c.SIZE_OF_UINT32))return null;
var d=this.data.getInt32(this.position,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_INT32;var b=this.data.getInt32(this.position,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_INT32;return new a(d,b)};c.prototype.readMultiByte=function(c,a){return this.validate(c)?"":null};c.prototype.readObject=function(){return null};c.prototype.readShort=function(){if(!this.validate(c.SIZE_OF_INT16))return null;var a=this.data.getInt16(this.position,this.endian==c.LITTLE_ENDIAN);this.position+=
c.SIZE_OF_INT16;return a};c.prototype.readUnsignedByte=function(){return this.validate(c.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null};c.prototype.readUnsignedInt=function(){if(!this.validate(c.SIZE_OF_UINT32))return null;var a=this.data.getUint32(this.position,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_UINT32;return a};c.prototype.readUnsignedInt64=function(){if(!this.validate(c.SIZE_OF_UINT32))return null;var a=this.data.getUint32(this.position,this.endian==c.LITTLE_ENDIAN);
this.position+=c.SIZE_OF_UINT32;var d=this.data.getUint32(this.position,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_UINT32;return new f(a,d)};c.prototype.readUnsignedShort=function(){if(!this.validate(c.SIZE_OF_UINT16))return null;var a=this.data.getUint16(this.position,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_UINT16;return a};c.prototype.readUTF=function(){if(!this.validate(c.SIZE_OF_UINT16))return null;var a=this.data.getUint16(this.position,this.endian==c.LITTLE_ENDIAN);
this.position+=c.SIZE_OF_UINT16;return 0<a?this.readUTFBytes(a):""};c.prototype.readUTFBytes=function(c){if(!this.validate(c))return null;for(var a=new Uint8Array(new ArrayBuffer(c)),d=0;d<c;d++)a[d]=this.data.getUint8(this.position++);return this.decodeUTF8(a)};c.prototype.writeBoolean=function(a){this.validateBuffer(c.SIZE_OF_BOOLEAN);this.data.setUint8(this.position++,a?1:0)};c.prototype.writeByte=function(a){this.validateBuffer(c.SIZE_OF_INT8);this.data.setInt8(this.position++,a)};c.prototype.writeUnsignedByte=
function(a){this.validateBuffer(c.SIZE_OF_UINT8);this.data.setUint8(this.position++,a)};c.prototype.writeBytes=function(c,a,d){"undefined"===typeof d&&(d=0);this.validateBuffer(d);a=new DataView(c.buffer);for(d=0;d<c.length;d++)this.data.setUint8(this.position++,a.getUint8(d))};c.prototype.writeDouble=function(a){this.validateBuffer(c.SIZE_OF_FLOAT64);this.data.setFloat64(this.position,a,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_FLOAT64};c.prototype.writeFloat=function(a){this.validateBuffer(c.SIZE_OF_FLOAT32);
this.data.setFloat32(this.position,a,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_FLOAT32};c.prototype.writeInt=function(a){this.validateBuffer(c.SIZE_OF_INT32);this.data.setInt32(this.position,a,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_INT32};c.prototype.writeMultiByte=function(c,a){};c.prototype.writeObject=function(c){};c.prototype.writeShort=function(a){this.validateBuffer(c.SIZE_OF_INT16);this.data.setInt16(this.position,a,this.endian==c.LITTLE_ENDIAN);this.position+=
c.SIZE_OF_INT16};c.prototype.writeUnsignedShort=function(a){this.validateBuffer(c.SIZE_OF_UINT16);this.data.setUint16(this.position,a,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_UINT16};c.prototype.writeUnsignedInt=function(a){this.validateBuffer(c.SIZE_OF_UINT32);this.data.setUint32(this.position,a,this.endian==c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_UINT32};c.prototype.writeUTF=function(a){a=this.encodeUTF8(a);var d=a.length;this.validateBuffer(c.SIZE_OF_UINT16+d);this.data.setUint16(this.position,
d,this.endian===c.LITTLE_ENDIAN);this.position+=c.SIZE_OF_UINT16;this.writeUint8Array(a)};c.prototype.writeUTFBytes=function(c){this.writeUint8Array(this.encodeUTF8(c))};c.prototype.toString=function(){return"[ByteArray]"};c.prototype.writeUint8Array=function(c){this.validateBuffer(this.position+c.length);for(var a=0;a<c.length;a++)this.data.setUint8(this.position++,c[a])};c.prototype.writeUint16Array=function(a){this.validateBuffer(this.position+a.length);for(var d=0;d<a.length;d++)this.data.setUint16(this.position,
a[d],this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_UINT16};c.prototype.writeUint32Array=function(a){this.validateBuffer(this.position+a.length);for(var d=0;d<a.length;d++)this.data.setUint32(this.position,a[d],this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_UINT32};c.prototype.writeInt8Array=function(c){this.validateBuffer(this.position+c.length);for(var a=0;a<c.length;a++)this.data.setInt8(this.position++,c[a])};c.prototype.writeInt16Array=function(a){this.validateBuffer(this.position+
a.length);for(var d=0;d<a.length;d++)this.data.setInt16(this.position,a[d],this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_INT16};c.prototype.writeInt32Array=function(a){this.validateBuffer(this.position+a.length);for(var d=0;d<a.length;d++)this.data.setInt32(this.position,a[d],this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_INT32};c.prototype.writeFloat32Array=function(a){this.validateBuffer(this.position+a.length);for(var d=0;d<a.length;d++)this.data.setFloat32(this.position,a[d],
this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_FLOAT32};c.prototype.writeFloat64Array=function(a){this.validateBuffer(this.position+a.length);for(var d=0;d<a.length;d++)this.data.setFloat64(this.position,a[d],this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_FLOAT64};c.prototype.readUint8Array=function(a){if(!this.validate(a))return null;for(var d=new Uint8Array(new ArrayBuffer(a)),b=0;b<a;b++)d[b]=this.data.getUint8(this.position),this.position+=c.SIZE_OF_UINT8;return d};c.prototype.readUint16Array=
function(a){var d=a*c.SIZE_OF_UINT16;if(!this.validate(d))return null;for(var d=new Uint16Array(new ArrayBuffer(d)),b=0;b<a;b++)d[b]=this.data.getUint16(this.position,this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_UINT16;return d};c.prototype.readUint32Array=function(a){var d=a*c.SIZE_OF_UINT32;if(!this.validate(d))return null;for(var d=new Uint32Array(new ArrayBuffer(d)),b=0;b<a;b++)d[b]=this.data.getUint32(this.position,this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_UINT32;return d};
c.prototype.readInt8Array=function(a){if(!this.validate(a))return null;for(var d=new Int8Array(new ArrayBuffer(a)),b=0;b<a;b++)d[b]=this.data.getInt8(this.position),this.position+=c.SIZE_OF_INT8;return d};c.prototype.readInt16Array=function(a){var d=a*c.SIZE_OF_INT16;if(!this.validate(d))return null;for(var d=new Int16Array(new ArrayBuffer(d)),b=0;b<a;b++)d[b]=this.data.getInt16(this.position,this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_INT16;return d};c.prototype.readInt32Array=function(a){var d=
a*c.SIZE_OF_INT32;if(!this.validate(d))return null;for(var d=new Int32Array(new ArrayBuffer(d)),b=0;b<a;b++)d[b]=this.data.getInt32(this.position,this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_INT32;return d};c.prototype.readFloat32Array=function(a){var d=a*c.SIZE_OF_FLOAT32;if(!this.validate(d))return null;for(var d=new Float32Array(new ArrayBuffer(d)),b=0;b<a;b++)d[b]=this.data.getFloat32(this.position,this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_FLOAT32;return d};c.prototype.readFloat64Array=
function(a){var d=a*c.SIZE_OF_FLOAT64;if(!this.validate(d))return null;for(var d=new Float64Array(new ArrayBuffer(d)),b=0;b<a;b++)d[b]=this.data.getFloat64(this.position,this.endian===c.LITTLE_ENDIAN),this.position+=c.SIZE_OF_FLOAT64;return d};c.prototype.validate=function(a){a+=this.offset;if(0<this.data.byteLength&&this._position+a<=this.data.byteLength)return!0;throw{name:"Error",message:"Error #2030: End of file was encountered.",errorID:2030};};c.prototype.validateBuffer=function(a){this.write_position=
a>this.write_position?a:this.write_position;this.data.byteLength<a&&(a=new Uint8Array(new ArrayBuffer(a+this.BUFFER_EXT_SIZE)),a.set(new Uint8Array(this.data.buffer)),this.data.buffer=a.buffer)};c.prototype.encodeUTF8=function(a){var c=0;a=this.stringToCodePoints(a);for(var d=[];a.length>c;){var b=a[c++];if(this.inRange(b,55296,57343))this.encoderError(b);else if(this.inRange(b,0,127))d.push(b);else{var f,e;this.inRange(b,128,2047)?(f=1,e=192):this.inRange(b,2048,65535)?(f=2,e=224):this.inRange(b,
65536,1114111)&&(f=3,e=240);for(d.push(this.div(b,Math.pow(64,f))+e);0<f;){var l=this.div(b,Math.pow(64,f-1));d.push(128+l%64);f-=1}}}return new Uint8Array(d)};c.prototype.decodeUTF8=function(a){for(var c=0,d="",b,f=0,e=0,l=0,p=0;a.length>c;){b=a[c++];if(b===this.EOF_byte)b=0!==e?this.decoderError(!1):this.EOF_code_point;else if(0===e)this.inRange(b,0,127)||(this.inRange(b,194,223)?(e=1,p=128,f=b-192):this.inRange(b,224,239)?(e=2,p=2048,f=b-224):this.inRange(b,240,244)?(e=3,p=65536,f=b-240):this.decoderError(!1),
f*=Math.pow(64,e),b=null);else if(this.inRange(b,128,191))if(l+=1,f+=(b-128)*Math.pow(64,e-l),l!==e)b=null;else{var r=f,s=p,p=l=e=f=0;b=this.inRange(r,s,1114111)&&!this.inRange(r,55296,57343)?r:this.decoderError(!1,b)}else p=l=e=f=0,c--,b=this.decoderError(!1,b);null!==b&&b!==this.EOF_code_point&&(65535>=b?0<b&&(d+=String.fromCharCode(b)):(b-=65536,d+=String.fromCharCode(55296+(b>>10&1023)),d+=String.fromCharCode(56320+(b&1023))))}return d};c.prototype.encoderError=function(a){throw{name:"EncodingError",
message:"The code point "+a+" could not be encoded.",errorID:0};};c.prototype.decoderError=function(a,c){if(a)throw{name:"DecodingError",message:"DecodingError.",errorID:0};return c||65533};c.prototype.inRange=function(a,c,d){return c<=a&&a<=d};c.prototype.div=function(a,c){return Math.floor(a/c)};c.prototype.stringToCodePoints=function(a){for(var c=[],d=0,b=a.length;d<a.length;){var f=a.charCodeAt(d);if(this.inRange(f,55296,57343))if(this.inRange(f,56320,57343))c.push(65533);else if(d===b-1)c.push(65533);
else{var e=a.charCodeAt(d+1);this.inRange(e,56320,57343)?(f&=1023,e&=1023,d+=1,c.push(65536+(f<<10)+e)):c.push(65533)}else c.push(f);d+=1}return c};c.BIG_ENDIAN="bigEndian";c.LITTLE_ENDIAN="littleEndian";c.SIZE_OF_BOOLEAN=1;c.SIZE_OF_INT8=1;c.SIZE_OF_INT16=2;c.SIZE_OF_INT32=4;c.SIZE_OF_UINT8=1;c.SIZE_OF_UINT16=2;c.SIZE_OF_UINT32=4;c.SIZE_OF_FLOAT32=4;c.SIZE_OF_FLOAT64=8;return c}();e.ByteArray=d})(b.utils||(b.utils={}))})(nid||(nid={}));Array.prototype.ElementClass=null;
Array.prototype.clear=function(){this.splice(0,this.length)};Array.prototype.back=function(){return this[this.length-1]};Array.prototype.reserve=function(b){if(null!=this.ElementClass&&void 0!=this.ElementClass)for(var e=0;e<b;e++)this.push(new this.ElementClass);else throw{name:"Reserve class undefined",message:"ElementClass no defined to reserve an Array"};};
(function(b){var e=function(){function b(){this.values=[];this.defined=[]}b.prototype.clear=function(){this.values.clear();this.defined.clear()};b.prototype.reserveDown=function(){};b.prototype.getItem=function(a){return a<this.defined.length&&this.defined[a]?this.values[a]:0};b.prototype.setItem=function(a,d,c){for(;a>=this.defined.length;)this.defined.push(!1);if(this.defined[a]=d){for(;a>=this.values.length;)this.values.push(0);this.values[a]=c}};b.prototype.checkSize=function(a){return this.defined.length==
a||0==this.defined.length};return b}();b.UInt64DefVector=e})(nid||(nid={}));var _7zipDefines;(function(b){b.CRC_INIT_VAL=4294967295;b.STREAM_SEEK_SET=0;b.STREAM_SEEK_CUR=1;b.STREAM_SEEK_END=2;b.k_AES=116459265;b.kNumMax=2147483647;b.kHeader=1;b.kCrcPoly=3988292384;b.kHeaderSize=32;b.kNumNoIndex=4294967295;b.kMajorVersion=0;b.kEncodedHeader=23})(_7zipDefines||(_7zipDefines={}));
(function(b){b.kEnd=1;b.kHeader=2;b.kArchiveProperties=3;b.kAdditionalStreamsInfo=4;b.kMainStreamsInfo=5;b.kFilesInfo=6;b.kPackInfo=7;b.kUnpackInfo=8;b.kSubStreamsInfo=9;b.kSize=10;b.kCRC=11;b.kFolder=12;b.kCodersUnpackSize=13;b.kNumUnpackStream=14;b.kEmptyStream=14;b.kEmptyFile=15;b.kAnti=16;b.kName=17;b.kCTime=18;b.kATime=19;b.kMTime=20;b.kWinAttributes=21;b.kComment=22;b.kEncodedHeader=23;b.kStartPos=24;b.kDummy=25})(nid||(nid={}));
(function(b){var e=function(){function b(){}b.prototype.CrcGenerateTable=function(){var a;for(a=0;256>a;a++){var d=a,c;for(c=0;8>c;c++)d=d>>1^_7zipDefines.kCrcPoly&~((d&1)-1);this.g_CrcTable[a]=d}if(1==this.CRC_NUM_TABLES)this.g_CrcUpdate=this.CrcUpdateT1;else{for(;a<256*this.CRC_NUM_TABLES;a++)d=this.g_CrcTable[a-256],this.g_CrcTable[a]=this.g_CrcTable[d&255]^d>>8;this.g_CrcUpdate=this.CrcUpdateT4;this.MY_CPU_X86_OR_AMD64&&!this.CPU_Is_InOrder()&&(this.g_CrcUpdate=this.CrcUpdateT8)}};b.prototype.CrcCalc=
function(a,d){return 0};b.prototype.CrcCalc1=function(a,d){for(var c=_7zipDefines.CRC_INIT_VAL,b=0;b<d;b++)c=this.CRC_UPDATE_BYTE(c,a[b]);return this.CRC_GET_DIGEST(c)};b.prototype.CRC_GET_DIGEST=function(a){return a^_7zipDefines.CRC_INIT_VAL};b.prototype.CRC_UPDATE_BYTE=function(a,d){return this.g_CrcTable[(a^d)&255]^a>>8};b.prototype.CPU_Is_InOrder=function(){return!1};return b}();b._7zipBase=e})(nid||(nid={}));
var __extends=this.__extends||function(b,e){function f(){this.constructor=b}for(var a in e)e.hasOwnProperty(a)&&(b[a]=e[a]);f.prototype=e.prototype;b.prototype=new f};
(function(b){var e=function(b){function a(a,c){b.call(this,a,c)}__extends(a,b);a.prototype.setCapacity=function(a){this.buffer=new ArrayBuffer(a)};a.prototype.skipData=function(a){this.position+=a};a.prototype.skipData2=function(){this.skipData(this.readNumber())};a.prototype.readID=function(){return this.readNumber()};a.prototype.readNumber=function(){for(var a=this.readByte(),c=128,b=0,f=0;8>f;f++){if(0==(a&c)){b+=(a&c-1)<<8*f;break}b|=this.readByte()<<8*f;c>>=1}return b};a.prototype.readNum=function(){var a=
this.readNumber();a>_7zipDefines.kNumMax&&console.log("Unsupported Num:"+a);return a};a.prototype.readUInt32=function(){return this.readUnsignedInt()};a.prototype.readUInt64=function(){return this.readUnsignedInt64()};a.prototype.readString=function(){return this.readUTFBytes(this.bytesAvailable/2*2)};return a}(b.utils.ByteArray);b.ByteBuffer=e})(nid||(nid={}));
(function(b){var e=function(b){function a(){b.call(this)}__extends(a,b);a.prototype.init=function(a,c){b.prototype.buffer=a.buffer};return a}(b.ByteBuffer);b.InByte2=e})(nid||(nid={}));(function(b){var e=function(){function b(){this.hasStream=!0;this.attribDefined=this.CRCDefined=this.isDir=!1}b.prototype.setAttrib=function(a){this.attribDefined=!0;this.attrib=a};return b}();b.FileItem=e})(nid||(nid={}));(function(b){var e=function(){return function(){}}();b.FileItem2=e})(nid||(nid={}));
(function(b){var e=function(){function b(){this.unpackCRCDefined=!1;this.coders=[];this.bindPairs=[];this.packStreams=[];this.unpackSizes=[]}b.prototype.getUnpackSize=function(){if(0==this.unpackSizes.length)return 0;for(var a=this.unpackSizes.length-1;0<=a;a--)if(0>this.findBindPairForOutStream(a))return this.unpackSizes[a]};b.prototype.getNumOutStreams=function(){for(var a=0,d=0;d<this.coders.length;d++)a+=this.coders[d].numOutStreams;return a};b.prototype.findBindPairForInStream=function(a){for(var d=
0;d<this.bindPairs.length;d++)if(this.bindPairs[d].inIndex==a)return d;return-1};b.prototype.findBindPairForOutStream=function(a){for(var d=0;d<this.bindPairs.length;d++)if(this.bindPairs[d].outIndex==a)return d;return-1};b.prototype.findPackStreamArrayIndex=function(a){for(var d=0;d<this.packStreams.length;d++)if(this.packStreams[d]==a)return d;return-1};b.prototype.isEncrypted=function(){for(var a=this.coders.length-1;0<=a;a--)if(this.coders[a].methodID==_7zipDefines.k_AES)return!0;return!1};b.prototype.checkStructure=
function(){};return b}();b.Folder=e})(nid||(nid={}));(function(b){var e=function(){return function(){}}();b.BufPtrSeqOutStream=e})(nid||(nid={}));(function(b){var e=function(b){function a(){b.apply(this,arguments)}__extends(a,b);return a}(b.utils.ByteArray);b.InStream=e})(nid||(nid={}));(function(b){})(nid||(nid={}));
(function(b){var e=function(b){function a(){b.call(this)}__extends(a,b);a.prototype.setStream=function(a){b.prototype.buffer=a.buffer};a.prototype.releaseStream=function(){};a.prototype.init=function(a){b.prototype.setCapacity.call(this,a);b.prototype.position=0;this.wasFinished=!1};return a}(b.ByteBuffer);b.LimitedSequentialInStream=e})(nid||(nid={}));
(function(b){var e=function(b){function a(){b.call(this)}__extends(a,b);a.prototype.init=function(a){b.prototype.buffer=a.buffer};return a}(b.ByteBuffer);b.LockedInStream=e})(nid||(nid={}));(function(b){var e=function(b){function a(){b.call(this)}__extends(a,b);a.prototype.init=function(a,c){b.prototype.buffer=a.buffer;b.prototype.offset=c};return a}(b.ByteBuffer);b.LockedSequentialInStreamImp=e})(nid||(nid={}));
(function(b){var e=function(){function b(){}b.prototype.remove=function(){this.needRemove&&(this.archive.deleteByteStream(),this.needRemove=!1)};b.prototype.set1=function(a,d,c){this.remove();this.archive=a;this.archive.addByteStream(d,c);this.needRemove=!0};b.prototype.set2=function(a,d){this.set1(a,d,d.length)};b.prototype.set3=function(a,d){this.remove();if(0!=a.inByteBack.readByte()){var c=a.inByteBack.readNum();(0>c||c>=d.length)&&console.log("Incorrect");this.set2(a,d[c])}};return b}();b.StreamSwitch=
e})(nid||(nid={}));
(function(b){var e=function(){function b(){}b.prototype.clear=function(){this.coders=[];this.bindPairs=[];this.inStreams=[];this.outStreams=[]};b.prototype.getNumStreams=function(){for(var a=0,d=0,c=0;c<this.coders.length;c++)var b=this.coders[c],a=a+b.numInStreams,d=d+b.numOutStreams;return[a,d]};b.prototype.findBinderForInStream=function(a){for(var b=0;b<this.bindPairs.length;b++)if(this.bindPairs[b].inIndex==a)return b;return-1};b.prototype.findBinderForOutStream=function(a){for(var b=0;b<this.bindPairs.length;b++)if(this.bindPairs[b].outIndex==
a)return b;return-1};b.prototype.getCoderInStreamIndex=function(a){for(var b=0,c=0;c<a;c++)b+=this.coders[c].numInStreams;return b};b.prototype.getCoderOutStreamIndex=function(a){for(var b=0,c=0;c<a;c++)b+=this.coders[c].numOutStreams;return b};b.prototype.findInStream=function(a){for(var b=0;b<this.coders.length;b++){var c=this.coders[b].numInStreams;if(a<c)return;a-=c}return[b,void 0]};b.prototype.findOutStream=function(a){for(var b=0;b<this.coders.length;b++){var c=this.coders[b].numOutStreams;
if(a<c)return;a-=c}return[b,void 0]};return b}();b.BindInfo=e})(nid||(nid={}));(function(b){var e=function(b){function a(){}__extends(a,b);a.prototype.clear=function(){this.coderMethodIDs=[];b.prototype.clear.call(this)};return a}(b.BindInfo);b.BindInfoEx=e})(nid||(nid={}));(function(b){var e=function(){return function(){}}();b.BindPair=e})(nid||(nid={}));(function(b){var e=function(){return function(){}}();b.BindReverseConverter=e})(nid||(nid={}));
(function(b){var e=function(){function b(){}b.prototype.isSimpleCoder=function(){return 1==this.numInStreams&&1==this.numOutStreams};return b}();b.CoderInfo=e})(nid||(nid={}));(function(b){var e=function(){return function(){}}();b.CoderInfo2=e})(nid||(nid={}));(function(b){var e=function(){function b(){this.coders=[]}b.prototype.setBindInfo=function(a){this.bindInfo=a};b.prototype.reInit=function(){};b.prototype.setCoderInfo=function(a,b,c){};return b}();b.CoderMixer2=e})(nid||(nid={}));
(function(b){var e=function(b){function a(){}__extends(a,b);a.prototype.addCoder=function(a){};a.prototype.addCoder2=function(a,b){};return a}(b.CoderMixer2);b.CoderMixer2MT=e})(nid||(nid={}));
(function(b){var e=function(f){function a(){}__extends(a,f);a.prototype.reInit=function(){};a.prototype.addCoder=function(a,b){this.addCoderCommon(b);this.coders.back().coder=a};a.prototype.addCoder2=function(a,b){this.addCoderCommon(b);this.coders.back().coder2=a};a.prototype.addCoderCommon=function(a){var c=this.bindInfo.coders[this.coders.length];this.coders.push(new b.STCoderInfo(c.numInStreams,c.numOutStreams,a))};a.prototype.getInStream=function(a,b,h){var q;for(q=0;q<this.bindInfo.inStreams.length;q++)if(this.bindInfo.inStreams[q]==
h)return!0;h=this.bindInfo.findBinderForInStream(h);if(0>h)return console.log("Invalid arguments"),!1;q=this.bindInfo.findOutStream(this.bindInfo.bindPairs[h].outIndex)[0];var k=this.coders[q];if(!k.coder)return console.log("Not implemented"),!1;h=k.coder;if(!h)return console.log("Not implemented"),!1;var g=this.bindInfo.getCoderInStreamIndex(q),f;if(!k.coder)return console.log("Not implemented"),!1;f=k.coder;if(!f||1<k.numInStreams)return console.log("Not implemented"),!1;for(q=0;q<k.numInStreams;q++){var e=
this.getInStream(a,b,g+q);f.setInStream(e)}return h};a.prototype.setOutStream=function(a,b,h){var q;for(q=0;q<this.bindInfo.outStreams.length;q++)if(this.bindInfo.outStreams[q]==h)return a=h=a[q];h=this.bindInfo.findBinderForOutStream(h);if(0>h)return console.log("Invalid arguments"),null;q=this.bindInfo.findInStream(this.bindInfo.bindPairs[h].inIndex)[0];var k=this.coders[q];if(!k.coder)return console.log("Not implemented"),null;h=k.coder;if(!h)return console.log("Not implemented"),null;var g=this.bindInfo.getCoderOutStreamIndex(q),
f;if(!k.coder)return console.log("Not implemented"),null;f=k.coder;if(!f||1<k.numOutStreams)return console.log("Not implemented"),null;for(q=0;q<k.numOutStreams;q++){var e=this.getOutStream(a,b,g+q);f.setOutStream(e)}return h};a.prototype.code=function(a,b,h,f,k,g,e){if(h!=this.bindInfo.inStreams.length||g!=this.bindInfo.outStreams.length)return console.log("E_INVALIDARG");h=-1;for(g=0;g<this.coders.length;g++)if(this.coders[g].isMain){h=g;break}if(0>h)for(g=0;g<this.coders.length;g++)if(1<this.coders[g].numInStreams){if(0<=
h)return console.log("E_NOTIMPL");h=g}0>h&&(h=0);var m=this.coders[h],l=[],p=[],r=this.bindInfo.getCoderInStreamIndex(h),s=this.bindInfo.getCoderOutStreamIndex(h);for(g=0;g<m.numInStreams;g++){var u=this.getInStream(a,b,r+g);l.push(u)}for(g=0;g<m.numOutStreams;g++)a=this.getOutStream(f,k,s+g),p.push(a);f=[];k=[];for(g=0;g<m.numInStreams;g++)f.push(l[g]);for(g=0;g<m.numOutStreams;g++)k.push(p[g]);for(g=0;g<this.coders.length;g++)g!=h&&(l=this.coders[g],(a=l.coder)&&a.setOutStreamSize(l.outSizePointers[0]));
m.coder?m.coder.code(f[0],k[0],m.inSizePointers[0],m.outSizePointers[0],e):m.coder2.code(f[0],m.inSizePointers[0],m.numInStreams,k[0],m.outSizePointers[0],m.numOutStreams,e);p[0].flush();return S_OK};return a}(b.CoderMixer2);b.CoderMixer2ST=e})(nid||(nid={}));(function(b){var e=function(){return function(){}}();b.CoderStreamsInfo=e})(nid||(nid={}));
(function(b){var e=function(){function f(a){"undefined"===typeof a&&(a=!1);this.multiThread=a;this.bindInfoExPrevIsDefined=!1}f.convertFolderItemInfoToBindInfo=function(a,d){d.clear();var c;for(c=0;c<a.bindPairs.length;c++){var h=new b.BindPair;h.inIndex=a.bindPairs[c].inIndex;h.outIndex=a.bindPairs[c].outIndex;d.bindPairs.push(h)}for(c=h=0;c<a.coders.length;c++){var f=new b.CoderStreamsInfo,k=a.coders[c];f.numInStreams=k.numInStreams;f.numOutStreams=k.numOutStreams;d.coders.push(f);d.coderMethodIDs.push(k.methodID);
for(k=0;k<f.numOutStreams;k++,h++)0>a.findBindPairForOutStream(h)&&d.outStreams.push(h)}for(c=0;c<a.packStreams.length;c++)d.inStreams.push(a.packStreams[c]);return d};f.areCodersEqual=function(a,b){return a.numInStreams==b.numInStreams&&a.numOutStreams==b.numOutStreams};f.areBindPairsEqual=function(a,b){return a.inIndex==b.inIndex&&a.outIndex==b.outIndex};f.areBindInfoExEqual=function(a,b){if(a.coders.length!=b.coders.length)return!1;var c;for(c=0;c<a.coders.length;c++)if(!this.areCodersEqual(a.coders[c],
b.coders[c]))return!1;if(a.bindPairs.length!=b.bindPairs.length)return!1;for(c=0;c<a.bindPairs.length;c++)if(!this.areBindPairsEqual(a.bindPairs[c],b.bindPairs[c]))return!1;for(c=0;c<a.coderMethodIDs.length;c++)if(a.coderMethodIDs[c]!=b.coderMethodIDs[c])return!1;return a.inStreams.length!=b.inStreams.length||a.outStreams.length!=b.outStreams.length?!1:!0};f.prototype.decode=function(a,d,c,h,e,k,g){if(!h.checkStructure())return console.log("CheckStructure not implemented");this.passwordIsDefined=
!1;k=[];var n=new b.LockedInStream;n.init(a);for(g=0;g<h.packStreams.length;g++){var m=a=new b.LockedSequentialInStreamImp;a.init(n,d);d+=c[g];var l=new b.LimitedSequentialInStream;a=l;l.setStream(m);l.init(c[g]);k.push(a)}a=h.coders.length;n=new b.BindInfoEx;f.convertFolderItemInfoToBindInfo(h,n);if(this.bindInfoExPrevIsDefined?!f.areBindInfoExEqual(n,this.bindInfoExPrev):1){this.decoders.clear();this.mixerCoderCommon=this.multiThread?this.mixerCoder=this.mixerCoderMTSpec=new b.CoderMixer2MT:this.mixerCoder=
this.mixerCoderSTSpec=new b.CoderMixer2ST;this.mixerCoderCommon.setBindInfo(n);for(d=0;d<a;d++){g=h.coders[d];CoderFactory.createCoder(g.methodID,void 0,void 0,!1);if(g.isSimpleCoder())return console.log("not implemented");this.multiThread?this.mixerCoderMTSpec.addCoder2(void 0):this.mixerCoderSTSpec.addCoder2(void 0,!1);this.decoders.push(void 0)}this.bindInfoExPrev=n;this.bindInfoExPrevIsDefined=!0}this.mixerCoderCommon.reInit();var p=l=m=0;for(d=0;d<a;d++){g=h.coders[d];p++;var r=g.numInStreams,
s=g.numOutStreams,u=[],v=[];for(g=0;g<s;g++,l++)v.push(h.unpackSizes[l]);for(g=0;g<r;g++,m++)if(s=h.findBindPairForInStream(m),0<=s)u.push(h.unpackSizes[h.bindPairs[s].outIndex]);else{s=h.findPackStreamArrayIndex(m);if(0>s)return console.log("something failed"),!1;u.push(c[s])}this.mixerCoderCommon.setCoderInfo(d,u[0],v[0])}n.findOutStream(n.outStreams[0],void 0,void 0);this.multiThread&&this.mixerCoderMTSpec.setProgressCoderIndex(void 0);if(0==a)return 0;c=[];for(d=0;d<k.length;d++)c.push(k[d]);
return this.mixerCoder.code(c[0],null,k.length,e,null,1,compressProgress)};return f}();b.Decoder=e})(nid||(nid={}));(function(b){})(nid||(nid={}));(function(b){var e=function(){return function(b,a,d){this.numInStreams=b;this.numOutStreams=a;this.isMain=d}}();b.STCoderInfo=e})(nid||(nid={}));
(function(b){var e=function(){function f(){this.packSizes=[];this.packCRCsDefined=[];this.packCRCs=[];this.folders=[];this.numUnpackStreamsVector=[];this.files=[];this.cTime=new b.UInt64DefVector;this.aTime=new b.UInt64DefVector;this.aTime=new b.UInt64DefVector;this.mTime=new b.UInt64DefVector;this.startPos=new b.UInt64DefVector;this.isAnti=[]}f.prototype.clear=function(){this.packSizes=[];this.packCRCsDefined=[];this.packCRCs=[];this.folders=[];this.numUnpackStreamsVector=[];this.files=[];this.cTime.clear();
this.aTime.clear();this.mTime.clear();this.startPos.clear();this.isAnti=[]};f.prototype.reserveDown=function(){};f.prototype.isEmpty=function(){return 0==this.packSizes.length&&0==this.packCRCsDefined.length&&0==this.packCRCs.length&&0==this.folders.length&&0==this.numUnpackStreamsVector.length&&0==this.files.length};f.prototype.checkNumFiles=function(){var a=this.files.length;return this.cTime.checkSize(a)&&this.aTime.checkSize(a)&&this.mTime.checkSize(a)&&this.startPos.checkSize(a)&&(a==this.isAnti.length||
0==this.isAnti.length)};f.prototype.isSolid=function(){for(var a=0;a<this.numUnpackStreamsVector.length;a++)if(1<this.numUnpackStreamsVector[a])return!0;return!1};f.prototype.isItemAnti=function(a){return a<this.isAnti.length&&this.isAnti[a]};f.prototype.setItemAnti=function(a,b){for(;a>=this.isAnti.length;)this.isAnti.push(!1);this.isAnti[a]=b};f.prototype.getFile=function(a,b,c){};f.prototype.addFile=function(a,b){};return f}();b.ArchiveDatabase=e})(nid||(nid={}));
(function(b){var e=function(f){function a(){this.archiveInfo=new b.InArchiveInfo}__extends(a,f);a.prototype.clear=function(){f.prototype.clear.call(this);this.archiveInfo.clear();this.packStreamStartPositions.clear();this.folderStartPackStreamIndex.clear();this.folderStartFileIndex.clear();this.fileIndexToFolderIndexMap.clear();this.phySize=this.headersSize=0};a.prototype.fillFolderStartPackStream=function(){this.folderStartPackStreamIndex.clear();for(var a=0,b=0;b<this.folders.length;b++)this.folderStartPackStreamIndex.push(a),
a+=this.folders[b].packStreams.length};a.prototype.fillStartPos=function(){};a.prototype.fillFolderStartFileIndex=function(){};a.prototype.fill=function(){this.fillFolderStartPackStream();this.fillStartPos();this.fillFolderStartFileIndex()};a.prototype.getFolderStreamPos=function(a,b){return this.archiveInfo.dataStartPosition+this.packStreamStartPositions[this.folderStartPackStreamIndex[a]+b]};a.prototype.getFolderFullPackSize=function(a){var b=this.folderStartPackStreamIndex[a];a=this.folders[a];
for(var h=0,f=0;f<a.packStreams.length;f++)h+=this.packSizes[b+f];return h};a.prototype.getFolderPackStreamSize=function(a,b){return this.packSizes[this.folderStartPackStreamIndex[a]+b]};a.prototype.getFilePackSize=function(a){var b=this.fileIndexToFolderIndexMap[a];return b!=_7zipDefines.kNumNoIndex&&this.folderStartFileIndex[b]==a?this.getFolderFullPackSize(b):0};return a}(b.ArchiveDatabase);b.ArchiveDatabaseEx=e})(nid||(nid={}));
(function(b){var e=function(){function b(){this.fileInfoPopIDs=[];this.dataStartPosition2=0}b.prototype.clear=function(){this.startPositionAfterHeader=this.dataStartPosition=this.versionMinor=this.versionMajor=null;this.startPosition=this.dataStartPosition2=0;this.fileInfoPopIDs=[]};return b}();b.InArchiveInfo=e})(nid||(nid={}));
(function(b){var e=function(){function f(){this.signature=[55,122,188,175,39,28];this.dataOffset=this.archiveBeginStreamPosition=0;this.headerSize=32;this.headersSize=0;this.inByteVector=[]}f.prototype.open=function(a){this.stream=a;this.findAndReadSignature()};f.prototype.findAndReadSignature=function(){if(this.stream.readByte()!=this.signature[0]||this.stream.readByte()!=this.signature[1]||this.stream.readByte()!=this.signature[2]||this.stream.readByte()!=this.signature[3]||this.stream.readByte()!=
this.signature[4]||this.stream.readByte()!=this.signature[5])return console.log("Error! Invalid file"),!1;console.log("7zip file");this.versionMajor=this.stream.readByte();this.versionMinor=this.stream.readByte();this.startHeaderCRC=this.stream.readUnsignedInt();this.nextHeaderOffset=this.stream.readUnsignedInt64().value();this.nextHeaderSize=this.stream.readUnsignedInt64().value();this.nextHeaderCRC=this.stream.readUnsignedInt();this.stream.position=this.nextHeaderOffset};f.prototype.readDatabase=
function(a){this.db=a;this.db.clear();this.db.archiveInfo.startPosition=this.archiveBeginStreamPosition;this.db.archiveInfo.versionMajor=this.versionMajor;this.db.archiveInfo.versionMinor=this.versionMinor;this.dataOffset=this.archiveBeginStreamPosition;if(this.versionMajor!=_7zipDefines.kMajorVersion)return console.log("UnsupportedVersion"),!1;this.dataOffset=this.archiveBeginStreamPosition+_7zipDefines.kHeaderSize;this.db.archiveInfo.startPositionAfterHeader=this.dataOffset;if(0==this.nextHeaderSize)return!0;
if(4294967295<this.nextHeaderSize||0>this.nextHeaderOffset)return!1;this.stream.position=this.nextHeaderOffset;var d=new b.ByteBuffer;d.setCapacity(this.nextHeaderSize);this.stream.readBytes(d,this.nextHeaderSize);this.headersSize+=_7zipDefines.kHeaderSize+this.nextHeaderSize;this.db.phySize=_7zipDefines.kHeaderSize+this.nextHeaderOffset+this.nextHeaderSize;var c=new b.StreamSwitch;c.set2(this,d);var d=[],h=this.inByteBack.readID();if(h!=b.kHeader){h!=b.kEncodedHeader&&console.log("Incorrect");this.readAndDecodePackedStreams(d)&&
console.log("readAndDecodePackedStreams:OK");if(0==d.length)return!0;1<d.length&&console.log("Incorrect");c.remove();c.set3(this,d);this.inByteBack.readID()!=b.kHeader&&console.log("Incorrect")}a.headersSize=this.headersSize;return this.readHeader()};f.prototype.readAndDecodePackedStreams=function(a){var d=[],c=[];this.readStreamsInfo(null,d,[],[],c,[],[],[],[]);for(var h=0,f=new b.Decoder,k=this.dataOffset,g=0;g<c.length;g++){var e=c[g],m=new b.ByteBuffer;a.push(m);var l=e.getUnpackSize();m.setCapacity(l);
f.decode(this.stream,k,d[h],e,m);for(m=0;m<e.packStreams.length;m++)l=d[h++],k+=l,this.headersSize+=l}return!0};f.prototype.readAndDecodePackedStreams2=function(a,d){this.waitAttribute(b.kFolder);var c=this.inByteBack.readNum();(new b.StreamSwitch).set3(this,a);d.clear();for(var h=0;h<c;h++){var f=new b.Folder;d.push(f);this.getNextFolderItem(f)}this.waitAttribute(b.kCodersUnpackSize);for(h=0;h<c;h++)for(var f=d[h],e=f.getNumOutStreams(),g=0;g<e;g++)f.unpackSizes.push(this.inByteBack.readNumber());
for(;;){h=this.inByteBack.readID();if(h==b.kEnd)break;if(h==b.kCRC)for(e=[],g=[],this.readHashDigests(c,e,g),h=0;h<c;h++)f=d[h],f.unpackCRCDefined=e[h],f.unpackCRC=g[h];else this.inByteBack.skipData2()}};f.prototype.readHeader=function(){var a=this.inByteBack.readID();a==b.kArchiveProperties&&(this.readArchiveProperties(),a=this.inByteBack.readID());var d=[];a==b.kAdditionalStreamsInfo&&(this.readAndDecodePackedStreams(d)&&console.log("kAdditionalStreamsInfo:OK"),this.db.archiveInfo.dataStartPosition2+=
this.db.archiveInfo.startPositionAfterHeader,a=this.inByteBack.readID());var c=[],h=[],f=[];if(a==b.kMainStreamsInfo)this.readStreamsInfo(d,this.db.packSizes,this.db.packCRCsDefined,this.db.packCRCs,this.db.folders,this.db.numUnpackStreamsVector,c,h,f),this.db.archiveInfo.dataStartPosition+=this.db.archiveInfo.startPositionAfterHeader,a=this.inByteBack.readID();else for(var e=0;e<this.db.folders.length;e++){this.db.numUnpackStreamsVector.push(1);var g=this.db.folders[e];c.push(g.getUnpackSize());
h.push(g.unpackCRCDefined);f.push(g.unpackCRC)}this.db.files.clear();if(a==b.kEnd)return!0;a!=b.kFilesInfo&&console.log("Incorrect");g=this.inByteBack.readNum();for(e=0;e<g;e++)this.db.files.push(new b.FileItem);this.db.archiveInfo.fileInfoPopIDs.push(b.kSize);0!=this.db.packSizes.length&&this.db.archiveInfo.fileInfoPopIDs.push(b.kPackInfo);0<g&&0!=f.length&&this.db.archiveInfo.fileInfoPopIDs.push(b.kCRC);var n=[];this.boolVector_Fill_False(n,g);for(var m=[],l=[],p=0;;){a=this.inByteBack.readID();
if(a==b.kEnd)break;var r=this.inByteBack.readNumber(),s=this.inByteBack.position,u=!0,v=!0;if(1073741824<a)v=!1;else switch(a){case b.kName:e=new b.StreamSwitch;e.set3(this,d);for(e=0;e<this.db.files.length;e++)this.db.files[e].name=this.inByteBack.readString();break;case b.kWinAttributes:var w=[];this.readBoolVector2(this.db.files.length,w);e=new b.StreamSwitch;e.set3(this,d);for(e=0;e<g;e++){var t=this.db.files[e];t.attribDefined=w[e];t.attribDefined&&(t.attrib=this.inByteBack.readUInt32())}break;
case b.kEmptyStream:this.readBoolVector(g,n);for(e=0;e<n.length;e++)n[e]&&p++;this.boolVector_Fill_False(m,p);this.boolVector_Fill_False(l,p);break;case b.kEmptyFile:this.readBoolVector(p,m);break;case b.kAnti:this.readBoolVector(p,l);break;case b.kStartPos:this.readUInt64DefVector(d,this.db.startPos,g);break;case b.kCTime:this.readUInt64DefVector(d,this.db.cTime,g);break;case b.kATime:this.readUInt64DefVector(d,this.db.aTime,g);break;case b.kMTime:this.readUInt64DefVector(d,this.db.mTime,g);break;
case b.kDummy:for(e=0;e<r;e++)0!=this.inByteBack.readByte()&&console.log("Incorrect");u=!1;break;default:u=v=!1}v?u&&this.db.archiveInfo.fileInfoPopIDs.push(a):this.inByteBack.skipData(r);(0<this.db.archiveInfo.versionMajor||2<this.db.archiveInfo.versionMinor)&&this.inByteBack.position-s!=r&&console.log("Incorrect")}for(e=r=d=a=0;e<p;e++)l[e]&&r++;for(e=0;e<g;e++)t=this.db.files[e],t.hasStream=!n[e],t.hasStream?(p=t.isDir=!1,t.size=c[d],t.CRC=f[d],t.CRCDefined=h[d],d++):(t.isDir=!m[a],p=l[a],a++,
t.size=0,t.CRCDefined=!1),0!=r&&this.db.isAnti.push(p);return!0};f.prototype.readArchiveProperties=function(){for(;this.inByteBack.readID()!=b.kEnd;)this.inByteBack.skipData2()};f.prototype.readPackInfo=function(a,d,c){this.dataOffset=this.inByteBack.readNumber();this.db.archiveInfo.dataStartPosition=this.dataOffset;var e=this.inByteBack.readNum();this.waitAttribute(b.kSize);a.clear();for(var f=0;f<e;f++)a.push(this.inByteBack.readNumber());for(;;){a=this.inByteBack.readID();if(a==b.kEnd)break;a==
b.kCRC?this.readHashDigests(e,d,c):this.inByteBack.skipData2()}if(0==d.length)for(this.boolVector_Fill_False(d,e),c.clear(),f=0;f<e;f++)c.push(0)};f.prototype.readHashDigests=function(a,b,c){this.readBoolVector2(a,b);c.clear();for(var e=0;e<a;e++){var f=0;b[e]&&(f=this.inByteBack.readUInt32());c.push(f)}};f.prototype.waitAttribute=function(a){for(;;){var d=this.inByteBack.readID();if(d==a)break;d==b.kEnd&&console.log("Incorrect");this.inByteBack.skipData2()}};f.prototype.readUnpackInfo=function(a,
d){this.waitAttribute(b.kFolder);var c=this.inByteBack.readNum();(void 0).set3(this,a);d.clear();for(var e=0;e<c;e++){var f=new b.Folder;d.push(f);this.getNextFolderItem(f)}this.waitAttribute(b.kCodersUnpackSize);for(e=0;e<c;e++)for(var f=d[e],k=f.getNumOutStreams(),g=0;g<k;g++)f.unpackSizes.push(this.inByteBack.readNumber());for(;;){e=this.inByteBack.readID();if(e==b.kEnd)break;if(e==b.kCRC)for(this.readHashDigests(c,void 0,void 0),e=0;e<c;e++)f=d[e],f.unpackCRCDefined=(void 0)[e],f.unpackCRC=(void 0)[e];
else this.inByteBack.skipData2()}};f.prototype.getNextFolderItem=function(a){var d=this.inByteBack.readNum();a.coders.clear();var c=0,e=0,f;for(f=0;f<d;f++){var k=new b.CoderInfo;a.coders.push(k);var g=this.inByteBack.readByte(),n=g&15,m=new b.ByteBuffer;m.setCapacity(15);this.inByteBack.readBytes(m,n);8<n&&console.log("Unsupported");for(var l=0,p=0;p<n;p++)l|=m[n-1-p]<<8*p;k.methodID=l;0!=(g&16)?(k.numInStreams=this.inByteBack.readNum(),k.numOutStreams=this.inByteBack.readNum()):(k.numInStreams=
1,k.numOutStreams=1);0!=(g&32)&&(n=this.inByteBack.readNum(),k.props.setCapacity(n),this.inByteBack.readBytes(k.props,n));0!=(g&128)&&console.log("Unsupported");c+=k.numInStreams;e+=k.numOutStreams}d=e-1;a.bindPairs.clear();for(f=0;f<d;f++)e=new b.BindPair,e.inIndex=this.inByteBack.readNum(),e.outIndex=this.inByteBack.readNum(),a.bindPairs.push(e);c<d&&console.log("Unsupported");d=c-d;if(1==d){for(f=0;f<c;f++)if(0>a.findBindPairForInStream(f)){a.packStreams.push(f);break}1!=a.packStreams.length&&
console.log("Unsupported")}else for(f=0;f<d;f++)a.packStreams.push(this.inByteBack.readNum())};f.prototype.readSubStreamsInfo=function(a,d,c,e,f){d.clear();for(var k;;)if(k=this.inByteBack.readID(),k==b.kNumUnpackStream)for(var g=0;g<a.length;g++)d.push(this.inByteBack.readNum());else{if(k==b.kCRC||k==b.kSize||k==b.kEnd)break;this.inByteBack.skipData2()}if(0==d.length)for(g=0;g<a.length;g++)d.push(1);for(g=0;g<d.length;g++){var n=d[g];if(0!=n){for(var m=0,l=1;l<n;l++)if(k==b.kSize){var p=this.inByteBack.readNumber();
c.push(p);m+=p}c.push(a[g].getUnpacklength-m)}}k==b.kSize&&(k=this.inByteBack.readID());for(g=m=c=0;g<a.length;g++)n=d[g],1==n&&a[g].UnpackCRCDefined||(c+=n),m+=n;for(;;){if(k==b.kCRC){k=[];p=[];this.readHashDigests(c,k,p);for(var r=0,g=0;g<a.length;g++)if(n=d[g],l=a[g],1==n&&l.unpackCRCDefined)e.push(!0),f.push(l.unpackCRC);else for(l=0;l<n;l++,r++)e.push(k[r]),f.push(p[r])}else if(k==b.kEnd){if(0==e.length)for(this.boolVector_Fill_False(e,m),f.clear(),g=0;g<m;g++)f.push(0);break}else this.inByteBack.skipData2();
k=this.inByteBack.readID()}};f.prototype.readStreamsInfo=function(a,d,c,e,f,k,g,n,m){for(;;){var l=this.inByteBack.readID();1073741824<l&&console.log("Incorrect");switch(l){case b.kEnd:return;case b.kPackInfo:this.readPackInfo(d,c,e);break;case b.kUnpackInfo:this.readUnpackInfo(a,f);break;case b.kSubStreamsInfo:this.readSubStreamsInfo(f,k,g,n,m);break;default:console.log("Incorrect")}}};f.prototype.readBoolVector=function(a,b){b.splice(0,b.length);b.reserve(a);for(var c=0,e=0,f=0;f<a;f++)0==e&&(c=
this.inByteBack.readByte(),e=128),b.push(0!=(c&e)),e>>=1;return b};f.prototype.readBoolVector2=function(a,b){if(0==this.inByteBack.readByte())this.readBoolVector(a,b);else{b.splice(0,b.length);b.reserve(a);for(var c=0;c<a;c++)b.push(!0);return b}};f.prototype.readUInt64DefVector=function(a,d,c){this.readBoolVector2(c,d.defined);(new b.StreamSwitch).set3(this,a);d.values.reserve(c);for(a=0;a<c;a++){var e=0;d.defined[a]&&(e=this.inByteBack.readUInt64().value());d.values.push(e)}};f.prototype.boolVector_Fill_False=
function(a,b){for(var c=0;c<b;c++)a[c]=!1};f.prototype.readDatabase2=function(){};f.prototype.deleteByteStream=function(){this.inByteVector.pop();0<this.inByteVector.length&&(this.inByteBack=this.inByteVector[this.inByteVector.length-1])};f.prototype.addByteStream=function(a,d){this.inByteBack=new b.InByte2;this.inByteVector.push(this.inByteBack);this.inByteBack.init(a,d)};return f}();b.InArchive=e})(nid||(nid={}));
(function(b){var e=b.utils.ByteArray,f=function(a){function d(a){a&&this.load(a);this.db=new b.ArchiveDatabaseEx}__extends(d,a);d.prototype.load=function(a){this.data=new e(a);this.archive=new b.InArchive;this.archive.open(this.data);this.archive.readDatabase(this.db)};return d}(b._7zipBase);b._7zip=f})(nid||(nid={}));
